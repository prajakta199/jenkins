node {
    loadCommonDataScript()
}

def allureLaunchId = 0
def allureTestOpsLaunch = "${commonData.ALLURE_TEST_OPS_LINK}/launch"

pipeline {
    agent {
        label "role:gcpbuild7"
    }

    options {
        timeout(time: 2, unit: 'HOURS')
    }

    parameters {
        choice choices: commonData.ALL_NAMESPACES, description: 'Stage for run tests', name: 'NAMESPACE'
        choice choices: ["lwc", "lwc-2", "lwc-3", "lwc-4", "lwc-5", "lwc-6"], name: 'LWC_TYPE'
        string defaultValue: "master", description: 'Git branch', name: 'BRANCH', trim: true
        choice choices: ["chrome", "firefox", "safari", "edge", "all", "mobile","chrome_seq"], name: 'BROWSER', description: "Currently this field is ignored"
        booleanParam defaultValue: false, name: 'slack_notification'
        string defaultValue: '#', description: "Notifications to Slack channel", name: 'slackNotificationChannel', trim: true
        string defaultValue: "", description: 'Test(s) filtered for execution. Possible input: numeric allure id(s), full/partial test spec name, tests directory, e.g. src/tests/e2e/login. If BROWSER is MOBILE then pass only numeric allure id(s).', name: 'TEST_FILTER', trim: true
        booleanParam defaultValue: false, name: 'is_allure_id', description: 'If selected then pass in TEST_FILTER field only one numeric allure id or several allure ids separated by space or comma.'
        booleanParam defaultValue: false, name: 'update_snapshots', description: 'Update snapshots to google cloud for current tests'
        booleanParam defaultValue: false, name: 'RP_ENABLED', description: 'If selected then a new launch will be re_
